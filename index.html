<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Flappy Modi — The Game</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@500;600;700;800;900&display=swap');

*{box-sizing:border-box;margin:0;padding:0}

body{
    background:#1a1408;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    min-height:100vh;
    font-family:'Outfit',sans-serif;
    overflow:hidden;
}

.wrap{
    position:relative;
    border-radius:14px;
    overflow:hidden;
    box-shadow:0 0 80px rgba(255,153,51,.15),0 25px 70px rgba(0,0,0,.6);
    border:2px solid rgba(255,255,255,.06);
}

canvas{display:block;width:100%;height:100%;cursor:pointer}

.hint{
    margin-top:10px;
    font-size:.7rem;
    color:#5a4a30;
    text-align:center
}
</style>
</head>

<body>
<div class="wrap">
    <canvas id="gc" width="480" height="720"></canvas>
</div>
<p class="hint">Space / Click / Tap to fly · R restart</p>

<script>
(function () {
"use strict";

const cv = document.getElementById("gc");
const ctx = cv.getContext("2d");
const W = cv.width;
const H = cv.height;

/* ═══════════════════════════
   LOAD REAL IMAGES
═══════════════════════════ */
const modiImg = new Image();
modiImg.src = "Modi.png";

const rahulImg = new Image();
rahulImg.src = "Rahul.png";

const congressImg = new Image();
congressImg.src = "Congress.png";

/* ═══════════════════════════ */
const C = {
    gravity:.42,
    flap:-7.2,
    pipeSpd:2.6,
    gap:175,
    pipeW:74,
    spawnMs:1750,
    birdR:28,
    groundH:50
};

let mode="menu";
let score=0;
let best=+localStorage.getItem("fmHi")||0;
let pipes=[];
let lastSpawn=0;

const bird={
    x:90,
    y:300,
    vy:0,
    rot:0,
    wing:0
};

/* ═══════════════════════════
   BACKGROUND
═══════════════════════════ */
function drawBackground(){
    const g=ctx.createLinearGradient(0,0,0,H);
    g.addColorStop(0,"#2a1e10");
    g.addColorStop(1,"#1a1408");
    ctx.fillStyle=g;
    ctx.fillRect(0,0,W,H);
}

/* ═══════════════════════════
   GROUND
═══════════════════════════ */
function drawGround(){
    const gy=H-C.groundH;
    ctx.fillStyle="#2d6830";
    ctx.fillRect(0,gy,W,C.groundH);
}

/* ═══════════════════════════
   ROUNDED RECT
═══════════════════════════ */
function rRect(x,y,w,h,r){
    ctx.beginPath();
    ctx.moveTo(x+r,y);
    ctx.lineTo(x+w-r,y);
    ctx.quadraticCurveTo(x+w,y,x+w,y+r);
    ctx.lineTo(x+w,y+h-r);
    ctx.quadraticCurveTo(x+w,y+h,x+w-r,y+h);
    ctx.lineTo(x+r,y+h);
    ctx.quadraticCurveTo(x,y+h,x,y+h-r);
    ctx.lineTo(x,y+r);
    ctx.quadraticCurveTo(x,y,x+r,y);
    ctx.closePath();
}

/* ═══════════════════════════
   DRAW RAHUL FACE
═══════════════════════════ */
function drawRahulCircle(x,y,r){
    ctx.save();
    ctx.beginPath();
    ctx.arc(x,y,r,0,Math.PI*2);
    ctx.clip();
    ctx.drawImage(rahulImg,x-r,y-r,r*2,r*2);
    ctx.restore();

    ctx.strokeStyle="rgba(0,100,180,.4)";
    ctx.lineWidth=1.5;
    ctx.beginPath();
    ctx.arc(x,y,r,0,Math.PI*2);
    ctx.stroke();
}

/* ═══════════════════════════
   DRAW PIPE
═══════════════════════════ */
function drawPipe(p){
    const pw=C.pipeW;
    const capH=34;
    const gapTop=p.gy-C.gap/2;
    const gapBot=p.gy+C.gap/2;
    const floorY=H-C.groundH;

    ctx.fillStyle="#f5f5f5";

    // top
    ctx.fillRect(p.x,0,pw,gapTop-capH);
    rRect(p.x-7,gapTop-capH,pw+14,capH,8);
    ctx.fill();
    drawRahulCircle(p.x+pw/2,gapTop-capH/2,14);

    // bottom
    ctx.fillRect(p.x,gapBot+capH,pw,floorY-gapBot-capH);
    rRect(p.x-7,gapBot,pw+14,capH,8);
    ctx.fill();
    drawRahulCircle(p.x+pw/2,gapBot+capH/2,14);

    // congress logos
    for(let y=gapBot+capH+20;y<floorY-20;y+=80){
        ctx.drawImage(congressImg,p.x+pw/2-12,y,24,24);
    }
}

/* ═══════════════════════════
   DRAW BIRD (MODI)
═══════════════════════════ */
function drawBird(){
    ctx.save();
    ctx.translate(bird.x,bird.y);
    ctx.rotate(bird.rot);

    const r=C.birdR;

    ctx.beginPath();
    ctx.arc(0,0,r,0,Math.PI*2);
    ctx.clip();

    ctx.drawImage(modiImg,-r,-r,r*2,r*2);
    ctx.restore();

    ctx.strokeStyle="#FF9933";
    ctx.lineWidth=3;
    ctx.beginPath();
    ctx.arc(bird.x,bird.y,r,0,Math.PI*2);
    ctx.stroke();
}

/* ═══════════════════════════
   HUD
═══════════════════════════ */
function drawHUD(){
    ctx.textAlign="center";
    ctx.font="900 52px Outfit";
    ctx.fillStyle="#fff";
    ctx.fillText(score,W/2,70);
}

/* ═══════════════════════════
   MENU
═══════════════════════════ */
function drawMenu(){
    ctx.fillStyle="rgba(0,0,0,.6)";
    ctx.fillRect(0,0,W,H);

    ctx.textAlign="center";
    ctx.font="900 48px Outfit";
    ctx.fillStyle="#FF9933";
    ctx.fillText("FLAPPY MODI",W/2,200);

    const br=68;
    ctx.save();
    ctx.beginPath();
    ctx.arc(W/2,355,br,0,Math.PI*2);
    ctx.clip();
    ctx.drawImage(modiImg,W/2-br,355-br,br*2,br*2);
    ctx.restore();

    ctx.fillStyle="#fff";
    ctx.font="700 18px Outfit";
    ctx.fillText("Tap or Press Space to Play",W/2,480);
}

/* ═══════════════════════════
   COLLISION
═══════════════════════════ */
function hit(){
    const r=C.birdR*.72;
    const gy=H-C.groundH;

    if(bird.y+r>gy||bird.y-r<0) return true;

    for(const p of pipes){
        const gt=p.gy-C.gap/2-34;
        const gb=p.gy+C.gap/2;
        if(bird.x+r>p.x && bird.x-r<p.x+C.pipeW){
            if(bird.y-r<gt || bird.y+r>gb) return true;
        }
    }
    return false;
}

/* ═══════════════════════════
   UPDATE
═══════════════════════════ */
function update(){
    if(mode!=="play") return;

    bird.vy+=C.gravity;
    bird.y+=bird.vy;
    bird.rot=Math.min(bird.vy*.05,Math.PI/3);

    const t=performance.now();
    if(t-lastSpawn>C.spawnMs){
        pipes.push({
            x:W+20,
            gy:150+Math.random()*350,
            sc:false
        });
        lastSpawn=t;
    }

    for(let i=pipes.length-1;i>=0;i--){
        pipes[i].x-=C.pipeSpd;

        if(!pipes[i].sc && pipes[i].x+C.pipeW<bird.x){
            pipes[i].sc=true;
            score++;
        }

        if(pipes[i].x<-C.pipeW)
            pipes.splice(i,1);
    }

    if(hit()){
        mode="menu";
        score=0;
        pipes=[];
        bird.y=300;
        bird.vy=0;
    }
}

/* ═══════════════════════════
   RENDER LOOP
═══════════════════════════ */
function render(){
    ctx.clearRect(0,0,W,H);
    drawBackground();
    pipes.forEach(drawPipe);
    drawGround();
    drawBird();
    if(mode==="play") drawHUD();
    if(mode==="menu") drawMenu();
    requestAnimationFrame(render);
}

/* ═══════════════════════════
   CONTROLS
═══════════════════════════ */
function flap(){
    if(mode==="menu"){
        mode="play";
        score=0;
        pipes=[];
        bird.y=300;
        bird.vy=C.flap;
        lastSpawn=performance.now();
        return;
    }
    bird.vy=C.flap;
}

cv.addEventListener("pointerdown",flap);
document.addEventListener("keydown",e=>{
    if(e.code==="Space") flap();
});

/* START */
(function loop(){
    update();
    requestAnimationFrame(loop);
})();
render();

})();
</script>
</body>
</html>
