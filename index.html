<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>Flappy Modi ‚Äî The Game</title>
    <meta name="description" content="A fun Flappy Bird parody game. Dodge obstacles and score big!" />
    <meta property="og:title" content="Flappy Modi ‚Äî The Game" />
    <meta property="og:description" content="A fun Flappy Bird parody. Dodge the obstacles and score big!" />
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÆ</text></svg>" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@500;600;700;800;900&display=swap');

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        body {
            background: #1a1408;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            font-family: 'Outfit', 'Segoe UI', system-ui, sans-serif;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent
        }

        .wrap {
            position: relative;
            border-radius: 14px;
            overflow: hidden;
            box-shadow: 0 0 80px rgba(255, 153, 51, .15), 0 25px 70px rgba(0, 0, 0, .6);
            border: 2px solid rgba(255, 255, 255, .06);
            max-width: 100vw;
            max-height: calc(100vh - 36px)
        }

        canvas {
            display: block;
            cursor: pointer;
            width: 100%;
            height: 100%
        }

        .hint {
            margin-top: 10px;
            font-size: .7rem;
            color: #5a4a30;
            text-align: center
        }

        .hint kbd {
            display: inline-block;
            padding: 1px 6px;
            background: rgba(255, 255, 255, .05);
            border: 1px solid rgba(255, 255, 255, .08);
            border-radius: 4px;
            font-family: inherit;
            color: #8a7a5a;
            margin: 0 1px;
            font-size: .68rem
        }

        @media(max-width:500px) {
            .wrap {
                border-radius: 0;
                border: none;
                box-shadow: none
            }

            .hint {
                display: none
            }

            body {
                justify-content: flex-start
            }
        }
    </style>
</head>

<body>
    <div class="wrap"><canvas id="gc" width="480" height="720"></canvas></div>
    <p class="hint"><kbd>Space</kbd> / <kbd>Click</kbd> / <kbd>Tap</kbd> to fly ¬∑ <kbd>R</kbd> restart</p>
    <script>
        (function () {
            "use strict";
            const cv = document.getElementById("gc"), ctx = cv.getContext("2d"), W = cv.width, H = cv.height;

            // ‚ïê‚ïê‚ïê CONFIG ‚ïê‚ïê‚ïê
            const C = { gravity: .42, flap: -7.2, pipeSpd: 2.6, gap: 175, pipeW: 74, spawnMs: 1750, birdR: 28, groundH: 50 };

            // ‚ïê‚ïê‚ïê STATE ‚ïê‚ïê‚ïê
            let mode = "menu", score = 0, best = +localStorage.getItem("fmHi2") || 0, fr = 0, lastSpawn = 0;
            const bird = { x: 90, y: 300, vy: 0, rot: 0, wing: 0 };
            let pipes = [], sparks = [], dustP = [], gndX = 0;

            // ‚ïê‚ïê‚ïê DUST PARTICLES ‚ïê‚ïê‚ïê
            for (let i = 0; i < 35; i++) dustP.push({
                x: Math.random() * W, y: 50 + Math.random() * (H - 120),
                r: 1 + Math.random() * 2.5, sp: .3 + Math.random() * .8,
                o: .08 + Math.random() * .15, drift: Math.random() * Math.PI * 2
            });

            // ‚ïê‚ïê‚ïê CLOUDS ‚ïê‚ïê‚ïê
            const clouds = Array.from({ length: 5 }, () => ({ x: Math.random() * W, y: 10 + Math.random() * 120, w: 30 + Math.random() * 70, s: .12 + Math.random() * .35 }));

            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            //  PRE-RENDER: MODI FACE
            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            function makeModiFace(sz) {
                const c = document.createElement("canvas"); c.width = c.height = sz;
                const g = c.getContext("2d"), r = sz / 2, cx = r, cy = r;
                // face
                const fg = g.createRadialGradient(cx, cy - r * .15, r * .08, cx, cy, r * .9);
                fg.addColorStop(0, "#e2b888"); fg.addColorStop(1, "#c08e56");
                g.beginPath(); g.arc(cx, cy, r * .88, 0, Math.PI * 2); g.fillStyle = fg; g.fill();
                // white hair top
                g.fillStyle = "#e2e2e2"; g.beginPath(); g.ellipse(cx, cy - r * .55, r * .72, r * .44, 0, Math.PI, 0); g.fill();
                g.fillStyle = "#d2d2d2"; g.beginPath(); g.ellipse(cx, cy - r * .68, r * .56, r * .28, 0, Math.PI, 0); g.fill();
                // side hair
                g.fillStyle = "#dcdcdc";
                g.beginPath(); g.ellipse(cx - r * .66, cy - r * .14, r * .19, r * .36, -.12, 0, Math.PI * 2); g.fill();
                g.beginPath(); g.ellipse(cx + r * .66, cy - r * .14, r * .19, r * .36, .12, 0, Math.PI * 2); g.fill();
                // ears
                g.fillStyle = "#c49058";
                g.beginPath(); g.ellipse(cx - r * .84, cy + r * .06, r * .11, r * .17, 0, 0, Math.PI * 2); g.fill();
                g.beginPath(); g.ellipse(cx + r * .84, cy + r * .06, r * .11, r * .17, 0, 0, Math.PI * 2); g.fill();
                // glasses
                const lw = sz * .024; g.strokeStyle = "#555"; g.lineWidth = lw;
                g.beginPath(); g.ellipse(cx - r * .28, cy + r * .02, r * .22, r * .16, 0, 0, Math.PI * 2); g.stroke();
                g.fillStyle = "rgba(200,220,255,.06)"; g.fill();
                g.beginPath(); g.ellipse(cx + r * .28, cy + r * .02, r * .22, r * .16, 0, 0, Math.PI * 2); g.stroke(); g.fill();
                g.beginPath(); g.moveTo(cx - r * .06, cy + r * .01); g.lineTo(cx + r * .06, cy + r * .01); g.stroke();
                g.beginPath(); g.moveTo(cx - r * .5, cy - .01); g.lineTo(cx - r * .74, cy - r * .11); g.stroke();
                g.beginPath(); g.moveTo(cx + r * .5, cy - .01); g.lineTo(cx + r * .74, cy - r * .11); g.stroke();
                // eyes
                g.fillStyle = "#1a0e05";
                g.beginPath(); g.ellipse(cx - r * .28, cy + r * .02, r * .065, r * .06, 0, 0, Math.PI * 2); g.fill();
                g.beginPath(); g.ellipse(cx + r * .28, cy + r * .02, r * .065, r * .06, 0, 0, Math.PI * 2); g.fill();
                g.fillStyle = "rgba(255,255,255,.65)";
                g.beginPath(); g.arc(cx - r * .26, cy - .005, r * .02, 0, Math.PI * 2); g.fill();
                g.beginPath(); g.arc(cx + r * .30, cy - .005, r * .02, 0, Math.PI * 2); g.fill();
                // eyebrows
                g.strokeStyle = "#999"; g.lineWidth = sz * .018;
                g.beginPath(); g.moveTo(cx - r * .43, cy - r * .15); g.quadraticCurveTo(cx - r * .28, cy - r * .24, cx - r * .12, cy - r * .14); g.stroke();
                g.beginPath(); g.moveTo(cx + r * .12, cy - r * .14); g.quadraticCurveTo(cx + r * .28, cy - r * .24, cx + r * .43, cy - r * .15); g.stroke();
                // nose
                g.strokeStyle = "#a07040"; g.lineWidth = sz * .013;
                g.beginPath(); g.moveTo(cx, cy + r * .06); g.quadraticCurveTo(cx + r * .09, cy + r * .2, cx, cy + r * .23); g.stroke();
                // white beard
                g.fillStyle = "#eaeaea"; g.beginPath();
                g.moveTo(cx - r * .46, cy + r * .2); g.quadraticCurveTo(cx - r * .52, cy + r * .56, cx - r * .14, cy + r * .72);
                g.quadraticCurveTo(cx, cy + r * .8, cx + r * .14, cy + r * .72); g.quadraticCurveTo(cx + r * .52, cy + r * .56, cx + r * .46, cy + r * .2); g.fill();
                g.fillStyle = "#d4d4d4"; g.beginPath(); g.moveTo(cx - r * .3, cy + r * .36); g.quadraticCurveTo(cx, cy + r * .68, cx + r * .3, cy + r * .36); g.fill();
                // smile
                g.strokeStyle = "#8B5030"; g.lineWidth = sz * .016; g.beginPath(); g.arc(cx, cy + r * .28, r * .12, .15, Math.PI - .15); g.stroke();
                return c;
            }

            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            //  PRE-RENDER: RAHUL FACE
            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            function makeRahulFace(sz) {
                const c = document.createElement("canvas"); c.width = c.height = sz;
                const g = c.getContext("2d"), r = sz / 2, cx = r, cy = r;
                const fg = g.createRadialGradient(cx, cy - r * .12, r * .08, cx, cy, r * .92);
                fg.addColorStop(0, "#d8ac7c"); fg.addColorStop(1, "#b88a58");
                g.beginPath(); g.arc(cx, cy, r * .88, 0, Math.PI * 2); g.fillStyle = fg; g.fill();
                // dark hair
                g.fillStyle = "#18100a"; g.beginPath(); g.ellipse(cx, cy - r * .42, r * .84, r * .58, 0, Math.PI, 0); g.fill();
                g.fillStyle = "#0e0804"; g.beginPath(); g.ellipse(cx, cy - r * .62, r * .66, r * .34, 0, Math.PI, 0); g.fill();
                g.fillStyle = "#18100a";
                g.beginPath(); g.ellipse(cx - r * .72, cy - r * .18, r * .18, r * .4, -.08, 0, Math.PI * 2); g.fill();
                g.beginPath(); g.ellipse(cx + r * .72, cy - r * .18, r * .18, r * .4, .08, 0, Math.PI * 2); g.fill();
                // ears
                g.fillStyle = "#c09060";
                g.beginPath(); g.ellipse(cx - r * .84, cy + r * .06, r * .11, r * .17, 0, 0, Math.PI * 2); g.fill();
                g.beginPath(); g.ellipse(cx + r * .84, cy + r * .06, r * .11, r * .17, 0, 0, Math.PI * 2); g.fill();
                // eyebrows
                g.strokeStyle = "#18100a"; g.lineWidth = sz * .03;
                g.beginPath(); g.moveTo(cx - r * .44, cy - r * .1); g.quadraticCurveTo(cx - r * .28, cy - r * .22, cx - r * .1, cy - r * .1); g.stroke();
                g.beginPath(); g.moveTo(cx + r * .1, cy - r * .1); g.quadraticCurveTo(cx + r * .28, cy - r * .22, cx + r * .44, cy - r * .1); g.stroke();
                // eyes
                g.fillStyle = "#0f0604";
                g.beginPath(); g.ellipse(cx - r * .27, cy + r * .03, r * .07, r * .065, 0, 0, Math.PI * 2); g.fill();
                g.beginPath(); g.ellipse(cx + r * .27, cy + r * .03, r * .07, r * .065, 0, 0, Math.PI * 2); g.fill();
                g.fillStyle = "rgba(255,255,255,.55)";
                g.beginPath(); g.arc(cx - r * .25, cy + r * .01, r * .018, 0, Math.PI * 2); g.fill();
                g.beginPath(); g.arc(cx + r * .29, cy + r * .01, r * .018, 0, Math.PI * 2); g.fill();
                // nose
                g.strokeStyle = "#a07040"; g.lineWidth = sz * .014;
                g.beginPath(); g.moveTo(cx, cy + r * .06); g.quadraticCurveTo(cx + r * .11, cy + r * .23, cx + r * .02, cy + r * .26); g.stroke();
                // stubble
                g.fillStyle = "rgba(25,18,8,.22)"; g.beginPath();
                g.moveTo(cx - r * .42, cy + r * .26); g.quadraticCurveTo(cx - r * .46, cy + r * .62, cx, cy + r * .74);
                g.quadraticCurveTo(cx + r * .46, cy + r * .62, cx + r * .42, cy + r * .26); g.fill();
                // smile
                g.strokeStyle = "#6B3520"; g.lineWidth = sz * .017; g.beginPath(); g.arc(cx, cy + r * .36, r * .17, .2, Math.PI - .2); g.stroke();
                g.fillStyle = "rgba(255,255,255,.35)"; g.beginPath(); g.arc(cx, cy + r * .38, r * .09, .1, Math.PI - .1); g.fill();
                return c;
            }

            const modiFace72 = makeModiFace(72), modiFace160 = makeModiFace(160), rahulFace54 = makeRahulFace(54);

            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            //  PRE-RENDER: INC HAND LOGO
            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            function makeINCLogo(sz) {
                const c = document.createElement("canvas"); c.width = c.height = sz;
                const g = c.getContext("2d"), cx = sz / 2, cy = sz / 2, s = sz * .35;

                // Open palm / hand symbol (INC logo)
                g.strokeStyle = "rgba(0,100,180,.6)"; g.lineWidth = sz * .04; g.lineCap = "round"; g.lineJoin = "round";

                // Palm base
                g.fillStyle = "rgba(0,100,180,.18)";
                g.beginPath();
                g.moveTo(cx - s * .45, cy + s * .6);
                g.quadraticCurveTo(cx - s * .5, cy - s * .1, cx - s * .35, cy - s * .3);
                g.lineTo(cx - s * .15, cy - s * .3);
                g.lineTo(cx - s * .15, cy - s * .9);// index finger
                g.lineTo(cx - s * .02, cy - s * .9);
                g.lineTo(cx - s * .02, cy - s * .3);
                g.lineTo(cx + s * .12, cy - s * .95);// middle finger
                g.lineTo(cx + s * .25, cy - s * .95);
                g.lineTo(cx + s * .15, cy - s * .3);
                g.lineTo(cx + s * .28, cy - s * .85);// ring finger
                g.lineTo(cx + s * .4, cy - s * .82);
                g.lineTo(cx + s * .32, cy - s * .25);
                g.lineTo(cx + s * .48, cy - s * .6);// pinky
                g.lineTo(cx + s * .58, cy - s * .55);
                g.lineTo(cx + s * .48, cy - s * .1);
                g.quadraticCurveTo(cx + s * .5, cy + s * .5, cx + s * .3, cy + s * .7);
                g.lineTo(cx - s * .45, cy + s * .6);
                g.closePath();
                g.fill(); g.stroke();

                // Thumb
                g.beginPath();
                g.moveTo(cx - s * .42, cy + s * .1);
                g.quadraticCurveTo(cx - s * .8, cy - s * .2, cx - s * .6, cy - s * .55);
                g.lineTo(cx - s * .45, cy - s * .45);
                g.quadraticCurveTo(cx - s * .6, cy - s * .1, cx - s * .35, cy + s * .05);
                g.stroke();

                return c;
            }
            const incLogo40 = makeINCLogo(40), incLogo24 = makeINCLogo(24);

            // ‚ïê‚ïê‚ïê AUDIO ‚ïê‚ïê‚ïê
            const ACls = window.AudioContext || window.webkitAudioContext; let ac;
            function aI() { if (!ac) ac = new ACls() }
            function tn(f, d, t, v) { if (!ac) return; const o = ac.createOscillator(), g = ac.createGain(); o.type = t || "square"; o.frequency.value = f; g.gain.setValueAtTime(v || .06, ac.currentTime); g.gain.exponentialRampToValueAtTime(.001, ac.currentTime + d); o.connect(g); g.connect(ac.destination); o.start(); o.stop(ac.currentTime + d) }
            function sFlap() { tn(440, .08, "sine", .05); tn(580, .06, "sine", .03) }
            function sScore() { tn(700, .07, "square", .04); setTimeout(() => tn(950, .1, "square", .04), 60) }
            function sHit() { tn(150, .35, "sawtooth", .05); setTimeout(() => tn(100, .2, "sawtooth", .03), 80) }

            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            //  DRAW: SLUM CITY BACKGROUND
            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            // Pre-gen slum buildings
            const slumBuildings = [];
            for (let i = 0; i < 30; i++) {
                slumBuildings.push({
                    x: i * 22,
                    w: 12 + Math.random() * 18,
                    h: 20 + Math.random() * 80,
                    roof: Math.random() > .5 ? 'flat' : 'angled',
                    roofAngle: Math.random() * .3 - .15,
                    color: 'rgba(' + (20 + Math.floor(Math.random() * 30)) + ',' + (15 + Math.floor(Math.random() * 20)) + ',' + (10 + Math.floor(Math.random() * 15)) + ',' + (.5 + Math.random() * .3) + ')',
                    hasWindow: Math.random() > .3,
                    hasDoor: Math.random() > .5,
                    hasAntenna: Math.random() > .7,
                    hasTarp: Math.random() > .6,
                    tarpColor: ['rgba(40,80,160,.25)', 'rgba(160,50,30,.2)', 'rgba(30,120,60,.2)', 'rgba(160,140,30,.2)'][Math.floor(Math.random() * 4)],
                });
            }

            function drawBackground() {
                // Dusty sky gradient
                const sg = ctx.createLinearGradient(0, 0, 0, H);
                sg.addColorStop(0, "#2a1e10");
                sg.addColorStop(.25, "#3d2a14");
                sg.addColorStop(.5, "#4a3520");
                sg.addColorStop(.75, "#3a2a18");
                sg.addColorStop(1, "#1a1408");
                ctx.fillStyle = sg; ctx.fillRect(0, 0, W, H);

                // Hazy sun/sky glow
                const sunG = ctx.createRadialGradient(W * .7, 80, 10, W * .7, 80, 180);
                sunG.addColorStop(0, "rgba(255,200,100,.12)");
                sunG.addColorStop(1, "rgba(255,200,100,0)");
                ctx.fillStyle = sunG; ctx.fillRect(0, 0, W, 300);

                // Dust haze clouds
                for (const cl of clouds) {
                    ctx.fillStyle = "rgba(180,150,100,.04)";
                    ctx.beginPath(); ctx.ellipse(cl.x, cl.y, cl.w, cl.w * .3, 0, 0, Math.PI * 2); ctx.fill();
                    ctx.beginPath(); ctx.ellipse(cl.x - cl.w * .4, cl.y + 3, cl.w * .5, cl.w * .2, 0, 0, Math.PI * 2); ctx.fill();
                    if (mode === "play") { cl.x -= cl.s; if (cl.x < -cl.w * 2) cl.x = W + cl.w }
                }

                // ‚îÄ‚îÄ SLUM CITY ‚îÄ‚îÄ
                const gy = H - C.groundH;
                const scrollOff = (fr * .35) % 660;

                // Far layer (darker, smaller)
                ctx.fillStyle = "rgba(18,12,8,.6)";
                for (let i = 0; i < 22; i++) {
                    const bx = ((i * 30) - scrollOff * .3 + 660) % 660;
                    const bw = 10 + ((i * 13) % 16); const bh = 20 + ((i * 19) % 50);
                    ctx.fillRect(bx, gy - bh - 20, bw, bh);
                }

                // Main slum layer
                for (let i = 0; i < slumBuildings.length; i++) {
                    const b = slumBuildings[i];
                    const bx = ((b.x * 1.2) - scrollOff + 800) % 800 - 40;
                    const by = gy - b.h;

                    // Building body
                    ctx.fillStyle = b.color;
                    ctx.fillRect(bx, by, b.w, b.h);

                    // Roof
                    if (b.roof === 'angled') {
                        ctx.fillStyle = "rgba(80,60,40,.4)";
                        ctx.beginPath();
                        ctx.moveTo(bx - 2, by);
                        ctx.lineTo(bx + b.w / 2, by - 8 - Math.random() * 4);
                        ctx.lineTo(bx + b.w + 2, by);
                        ctx.closePath(); ctx.fill();
                    } else {
                        // Tin roof edge
                        ctx.fillStyle = "rgba(100,90,70,.3)";
                        ctx.fillRect(bx - 2, by - 2, b.w + 4, 4);
                    }

                    // Tarp/cloth on some buildings
                    if (b.hasTarp) {
                        ctx.fillStyle = b.tarpColor;
                        ctx.fillRect(bx, by + b.h * .2, b.w, b.h * .25);
                    }

                    // Windows (dim yellow light)
                    if (b.hasWindow && b.h > 35) {
                        const wGlow = ((fr * 0.02 + i) % 3 < 1) ? "rgba(255,200,80,.15)" : "rgba(255,180,60,.08)";
                        ctx.fillStyle = wGlow;
                        for (let wy = by + 10; wy < by + b.h - 15; wy += 18) {
                            ctx.fillRect(bx + 3, wy, 4, 5);
                            if (b.w > 16) ctx.fillRect(bx + b.w - 7, wy, 4, 5);
                        }
                    }

                    // Door
                    if (b.hasDoor) {
                        ctx.fillStyle = "rgba(0,0,0,.3)";
                        ctx.fillRect(bx + b.w * .3, gy - 12, b.w * .35, 12);
                    }

                    // Antenna / pole
                    if (b.hasAntenna) {
                        ctx.strokeStyle = "rgba(100,80,60,.4)"; ctx.lineWidth = 1;
                        ctx.beginPath(); ctx.moveTo(bx + b.w * .6, by); ctx.lineTo(bx + b.w * .6, by - 15); ctx.stroke();
                        ctx.beginPath(); ctx.moveTo(bx + b.w * .6 - 5, by - 12); ctx.lineTo(bx + b.w * .6 + 5, by - 12); ctx.stroke();
                    }
                }

                // Electric wires between buildings
                ctx.strokeStyle = "rgba(60,50,40,.2)"; ctx.lineWidth = .8;
                for (let i = 0; i < 4; i++) {
                    const wx1 = ((i * 120) - scrollOff + 600) % 600;
                    const wy = gy - 60 - i * 18;
                    ctx.beginPath();
                    ctx.moveTo(wx1, wy);
                    ctx.quadraticCurveTo(wx1 + 60, wy + 15 + Math.sin(fr * .03 + i) * 3, wx1 + 120, wy - 5);
                    ctx.stroke();
                }

                // ‚îÄ‚îÄ FLYING DUST PARTICLES ‚îÄ‚îÄ
                for (const d of dustP) {
                    ctx.globalAlpha = d.o;
                    ctx.fillStyle = "rgba(200,170,120,1)";
                    ctx.beginPath(); ctx.arc(d.x, d.y, d.r, 0, Math.PI * 2); ctx.fill();
                    if (mode === "play" || mode === "menu") {
                        d.x -= d.sp;
                        d.y += Math.sin(fr * .02 + d.drift) * .4;
                        if (d.x < -5) { d.x = W + 5; d.y = 50 + Math.random() * (H - 120) }
                    }
                }
                ctx.globalAlpha = 1;

                // Dust haze at bottom
                const hazeG = ctx.createLinearGradient(0, gy - 60, 0, gy);
                hazeG.addColorStop(0, "rgba(160,130,80,0)");
                hazeG.addColorStop(1, "rgba(160,130,80,.06)");
                ctx.fillStyle = hazeG; ctx.fillRect(0, gy - 60, W, 60);
            }

            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            //  DRAW: GREEN GRASS GROUND
            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            function drawGround() {
                const gy = H - C.groundH;
                const gg = ctx.createLinearGradient(0, gy, 0, H);
                gg.addColorStop(0, "#3a7d3e"); gg.addColorStop(.15, "#2d6830"); gg.addColorStop(1, "#1e4a20");
                ctx.fillStyle = gg; ctx.fillRect(0, gy, W, C.groundH);
                // bright edge
                ctx.fillStyle = "#4aad50"; ctx.fillRect(0, gy, W, 3);
                // grass tufts
                ctx.strokeStyle = "#52c058"; ctx.lineWidth = 1.3;
                const off = gndX % 24;
                for (let t = -off; t < W + 24; t += 24) {
                    ctx.beginPath(); ctx.moveTo(t, gy + 2); ctx.lineTo(t - 3, gy - 4); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(t + 5, gy + 2); ctx.lineTo(t + 8, gy - 3); ctx.stroke();
                }
                // dirt
                ctx.fillStyle = "#6a4420"; ctx.fillRect(0, gy + 7, W, 2);
                ctx.fillStyle = "rgba(90,60,30,.3)"; ctx.fillRect(0, gy + 10, W, C.groundH - 10);
                if (mode === "play") gndX += C.pipeSpd;
            }

            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            //  DRAW: WHITE PIPES + INC LOGO
            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            function rRect(x, y, w, h, r) {
                ctx.beginPath(); ctx.moveTo(x + r, y); ctx.lineTo(x + w - r, y);
                ctx.quadraticCurveTo(x + w, y, x + w, y + r); ctx.lineTo(x + w, y + h - r);
                ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h); ctx.lineTo(x + r, y + h);
                ctx.quadraticCurveTo(x, y + h, x, y + h - r); ctx.lineTo(x, y + r);
                ctx.quadraticCurveTo(x, y, x + r, y); ctx.closePath();
            }

            function drawPipe(p) {
                const pw = C.pipeW, capH = 34, ext = 7;
                const gapTop = p.gy - C.gap / 2;
                const gapBot = p.gy + C.gap / 2;
                const floorY = H - C.groundH;

                // White pipe gradient
                const pg = ctx.createLinearGradient(p.x, 0, p.x + pw, 0);
                pg.addColorStop(0, "#c8c8c8"); pg.addColorStop(.2, "#e8e8e8");
                pg.addColorStop(.5, "#f5f5f5"); pg.addColorStop(.8, "#e0e0e0"); pg.addColorStop(1, "#bbb");

                const cg = ctx.createLinearGradient(p.x - ext, 0, p.x + pw + ext, 0);
                cg.addColorStop(0, "#b0b0b0"); cg.addColorStop(.3, "#e5e5e5");
                cg.addColorStop(.5, "#fff"); cg.addColorStop(.7, "#e5e5e5"); cg.addColorStop(1, "#aaa");

                // ‚îÄ‚îÄ‚îÄ TOP PIPE ‚îÄ‚îÄ‚îÄ
                const topH = gapTop - capH;
                if (topH > 0) {
                    ctx.fillStyle = pg; ctx.fillRect(p.x, 0, pw, topH);
                    // Shine line
                    ctx.fillStyle = "rgba(255,255,255,.2)"; ctx.fillRect(p.x + 12, 0, 4, topH);
                    // Shadow line
                    ctx.fillStyle = "rgba(0,0,0,.06)"; ctx.fillRect(p.x + pw - 8, 0, 4, topH);
                    // INC logos along pipe body
                    const logoSpacing = 80;
                    for (let ly = 20; ly < topH - 20; ly += logoSpacing) {
                        ctx.drawImage(incLogo24, p.x + pw / 2 - 12, ly);
                    }
                }
                // Top cap
                ctx.fillStyle = cg;
                rRect(p.x - ext, gapTop - capH, pw + ext * 2, capH, 8); ctx.fill();
                ctx.strokeStyle = "rgba(0,0,0,.12)"; ctx.lineWidth = 1; ctx.stroke();

                // Rahul face on top cap
                drawRahulCircle(p.x + pw / 2, gapTop - capH / 2, 14);

                // ‚îÄ‚îÄ‚îÄ BOTTOM PIPE ‚îÄ‚îÄ‚îÄ
                const botH = floorY - gapBot - capH;
                if (botH > 0) {
                    ctx.fillStyle = pg; ctx.fillRect(p.x, gapBot + capH, pw, botH);
                    ctx.fillStyle = "rgba(255,255,255,.2)"; ctx.fillRect(p.x + 12, gapBot + capH, 4, botH);
                    ctx.fillStyle = "rgba(0,0,0,.06)"; ctx.fillRect(p.x + pw - 8, gapBot + capH, 4, botH);
                    for (let ly = gapBot + capH + 20; ly < floorY - 20; ly += 80) {
                        ctx.drawImage(incLogo24, p.x + pw / 2 - 12, ly);
                    }
                }
                // Bottom cap
                ctx.fillStyle = cg;
                rRect(p.x - ext, gapBot, pw + ext * 2, capH, 8); ctx.fill();
                ctx.strokeStyle = "rgba(0,0,0,.12)"; ctx.lineWidth = 1; ctx.stroke();

                // Rahul face on bottom cap
                drawRahulCircle(p.x + pw / 2, gapBot + capH / 2, 14);
            }

            function drawRahulCircle(x, y, r) {
                ctx.save(); ctx.beginPath(); ctx.arc(x, y, r, 0, Math.PI * 2); ctx.closePath(); ctx.clip();
                ctx.drawImage(rahulFace54, x - r, y - r, r * 2, r * 2); ctx.restore();
                ctx.strokeStyle = "rgba(0,100,180,.4)"; ctx.lineWidth = 1.5;
                ctx.beginPath(); ctx.arc(x, y, r, 0, Math.PI * 2); ctx.stroke();
            }

            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            //  DRAW: MODI BIRD
            // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            function drawBird() {
                ctx.save(); ctx.translate(bird.x, bird.y); ctx.rotate(bird.rot);
                const r = C.birdR;
                // glow
                ctx.shadowColor = "rgba(255,153,51,.35)"; ctx.shadowBlur = 22;
                // clipped face
                ctx.beginPath(); ctx.arc(0, 0, r, 0, Math.PI * 2); ctx.closePath();
                ctx.save(); ctx.clip(); ctx.drawImage(modiFace72, -r, -r, r * 2, r * 2); ctx.restore();
                ctx.shadowBlur = 0;
                // saffron ring
                ctx.strokeStyle = "#FF9933"; ctx.lineWidth = 3;
                ctx.beginPath(); ctx.arc(0, 0, r, 0, Math.PI * 2); ctx.stroke();
                // outer glow ring
                ctx.strokeStyle = "rgba(255,153,51,.16)"; ctx.lineWidth = 1.5;
                ctx.beginPath(); ctx.arc(0, 0, r + 5, 0, Math.PI * 2); ctx.stroke();
                // wings
                if (bird.wing > 0) {
                    ctx.strokeStyle = "rgba(255,200,100,.5)"; ctx.lineWidth = 2;
                    ctx.beginPath(); ctx.moveTo(-r * .75, 0); ctx.quadraticCurveTo(-r * 1.4, -r * .85, -r * 1.6, -r * .15); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(r * .75, 0); ctx.quadraticCurveTo(r * 1.4, -r * .85, r * 1.6, -r * .15); ctx.stroke();
                    bird.wing--;
                }
                ctx.restore();
            }

            // ‚ïê‚ïê‚ïê HUD ‚ïê‚ïê‚ïê
            function drawHUD() {
                ctx.textAlign = "center";
                ctx.font = "900 52px Outfit,sans-serif";
                ctx.fillStyle = "rgba(0,0,0,.4)"; ctx.fillText(score, W / 2 + 2, 70);
                ctx.fillStyle = "#fff"; ctx.fillText(score, W / 2, 68);
            }

            // ‚ïê‚ïê‚ïê SPARKS ‚ïê‚ïê‚ïê
            function addSparks(x, y, col, n) { for (let i = 0; i < (n || 8); i++)sparks.push({ x, y, vx: (Math.random() - .5) * 7, vy: (Math.random() - .5) * 7 - 2, r: 1.5 + Math.random() * 3.5, l: 1, c: col }) }
            function tickSparks() {
                for (let i = sparks.length - 1; i >= 0; i--) {
                    const s = sparks[i]; s.x += s.vx; s.y += s.vy; s.vy += .13; s.l -= .024;
                    if (s.l <= 0) { sparks.splice(i, 1); continue }
                    ctx.globalAlpha = s.l; ctx.fillStyle = s.c;
                    ctx.beginPath(); ctx.arc(s.x, s.y, s.r * s.l, 0, Math.PI * 2); ctx.fill();
                }
                ctx.globalAlpha = 1;
            }

            // ‚ïê‚ïê‚ïê MENU ‚ïê‚ïê‚ïê
            function drawMenu() {
                ctx.fillStyle = "rgba(20,14,8,.55)"; ctx.fillRect(0, 0, W, H);
                ctx.textAlign = "center";
                // title
                ctx.font = "900 48px Outfit,sans-serif";
                ctx.fillStyle = "#FF9933"; ctx.fillText("FLAPPY", W / 2, 168);
                ctx.fillStyle = "#fff"; ctx.fillText("MODI", W / 2, 220);
                ctx.font = "600 15px Outfit,sans-serif"; ctx.fillStyle = "#9a8a6a";
                ctx.fillText("Dodge the obstacles & score big!", W / 2, 252);
                // big modi face
                const br = 68;
                ctx.save(); ctx.beginPath(); ctx.arc(W / 2, 355, br, 0, Math.PI * 2); ctx.closePath(); ctx.clip();
                ctx.drawImage(modiFace160, W / 2 - br, 355 - br, br * 2, br * 2); ctx.restore();
                ctx.strokeStyle = "#FF9933"; ctx.lineWidth = 3; ctx.beginPath(); ctx.arc(W / 2, 355, br, 0, Math.PI * 2); ctx.stroke();
                const bob = Math.sin(fr * .05) * 5;
                ctx.strokeStyle = "rgba(255,153,51,.1)"; ctx.lineWidth = 1.5;
                ctx.beginPath(); ctx.arc(W / 2, 355 + bob, br + 9, 0, Math.PI * 2); ctx.stroke();
                // prompt
                const pl = .6 + Math.sin(fr * .08) * .4; ctx.globalAlpha = pl;
                ctx.font = "700 18px Outfit,sans-serif"; ctx.fillStyle = "#FF9933";
                ctx.fillText("TAP  or  SPACE  to Play", W / 2, 478); ctx.globalAlpha = 1;
                if (best > 0) { ctx.font = "600 14px Outfit,sans-serif"; ctx.fillStyle = "#5a4a30"; ctx.fillText("Best: " + best, W / 2, 514) }
                ctx.font = "500 11px Outfit,sans-serif"; ctx.fillStyle = "#302818";
                ctx.fillText("A fun parody game ‚Äî no political stance intended üòÑ", W / 2, H - 26);
            }

            // ‚ïê‚ïê‚ïê GAME OVER ‚ïê‚ïê‚ïê
            function drawDead() {
                ctx.fillStyle = "rgba(15,10,5,.75)"; ctx.fillRect(0, 0, W, H);
                const px = W / 2 - 155, py = 165, pw2 = 310, ph = 340;
                ctx.fillStyle = "rgba(30,22,12,.96)"; rRect(px, py, pw2, ph, 18); ctx.fill();
                ctx.strokeStyle = "rgba(255,153,51,.1)"; ctx.lineWidth = 1.5; ctx.stroke();
                ctx.textAlign = "center";
                ctx.font = "900 34px Outfit,sans-serif"; ctx.fillStyle = "#ef4444"; ctx.fillText("GAME OVER", W / 2, py + 52);
                ctx.font = "600 13px Outfit,sans-serif"; ctx.fillStyle = "#9a8a6a"; ctx.fillText("SCORE", W / 2, py + 92);
                ctx.font = "900 58px Outfit,sans-serif"; ctx.fillStyle = "#FF9933"; ctx.fillText(score, W / 2, py + 155);
                ctx.font = "600 13px Outfit,sans-serif"; ctx.fillStyle = "#5a4a30"; ctx.fillText("BEST", W / 2, py + 192);
                ctx.font = "800 28px Outfit,sans-serif"; ctx.fillStyle = (score >= best && score > 0) ? "#22c55e" : "#9a8a6a"; ctx.fillText(best, W / 2, py + 222);
                if (score >= best && score > 0) { ctx.font = "600 13px Outfit,sans-serif"; ctx.fillStyle = "#22c55e"; ctx.fillText("üéâ NEW BEST!", W / 2, py + 250) }
                const q = .55 + Math.sin(fr * .08) * .45; ctx.globalAlpha = q;
                ctx.font = "700 16px Outfit,sans-serif"; ctx.fillStyle = "#FF9933"; ctx.fillText("TAP  or  SPACE  to Retry", W / 2, py + 305); ctx.globalAlpha = 1;
            }

            // ‚ïê‚ïê‚ïê COLLISION ‚ïê‚ïê‚ïê
            function hit() {
                const r = C.birdR * .72, gy = H - C.groundH;
                if (bird.y + r > gy || bird.y - r < 0) return true;
                for (const p of pipes) {
                    const gt = p.gy - C.gap / 2 - 34;
                    const gb = p.gy + C.gap / 2;
                    if (bird.x + r > p.x && bird.x - r < p.x + C.pipeW) { if (bird.y - r < gt || bird.y + r > gb) return true }
                }
                return false;
            }

            // ‚ïê‚ïê‚ïê UPDATE ‚ïê‚ïê‚ïê
            function update() {
                if (mode !== "play") return;
                bird.vy += C.gravity; bird.y += bird.vy;
                bird.rot = Math.min(bird.vy * .055, Math.PI / 3.5);
                const t = performance.now();
                if (t - lastSpawn > C.spawnMs) {
                    const mn = 130, mx = H - C.groundH - 130;
                    pipes.push({ x: W + 20, gy: mn + Math.random() * (mx - mn), sc: false }); lastSpawn = t;
                }
                for (let i = pipes.length - 1; i >= 0; i--) {
                    pipes[i].x -= C.pipeSpd;
                    if (!pipes[i].sc && pipes[i].x + C.pipeW < bird.x) { pipes[i].sc = true; score++; sScore(); addSparks(bird.x, bird.y, "#FF9933", 6) }
                    if (pipes[i].x < -C.pipeW - 20) pipes.splice(i, 1);
                }
                if (hit()) { mode = "dead"; sHit(); addSparks(bird.x, bird.y, "#ef4444", 14); if (score > best) { best = score; localStorage.setItem("fmHi2", best) } }
            }

            // ‚ïê‚ïê‚ïê RENDER ‚ïê‚ïê‚ïê
            function render() {
                ctx.clearRect(0, 0, W, H);
                drawBackground();
                pipes.forEach(drawPipe);
                drawGround();
                tickSparks();
                if (mode === "dead") { bird.vy += C.gravity; bird.y = Math.min(bird.y + bird.vy, H - C.groundH - C.birdR); bird.rot = Math.min(bird.rot + .04, Math.PI / 2) }
                drawBird();
                if (mode === "play") drawHUD();
                if (mode === "menu") drawMenu();
                if (mode === "dead") drawDead();
                fr++; requestAnimationFrame(render);
            }

            // ‚ïê‚ïê‚ïê CONTROLS ‚ïê‚ïê‚ïê
            function flap() {
                aI();
                if (mode === "menu") { mode = "play"; score = 0; pipes = []; sparks = []; bird.y = 300; bird.vy = C.flap; bird.rot = 0; bird.wing = 5; lastSpawn = performance.now(); sFlap(); return }
                if (mode === "dead") { mode = "menu"; score = 0; pipes = []; sparks = []; bird.y = 300; bird.vy = 0; bird.rot = 0; return }
                bird.vy = C.flap; bird.wing = 5; sFlap(); addSparks(bird.x - 8, bird.y + 14, "rgba(255,255,255,.35)", 3);
            }
            cv.addEventListener("pointerdown", e => { e.preventDefault(); flap() });
            document.addEventListener("keydown", e => {
                if (e.code === "Space" || e.code === "ArrowUp") { e.preventDefault(); flap() }
                if (e.code === "KeyR") { mode = "menu"; score = 0; pipes = []; sparks = []; bird.y = 300; bird.vy = 0; bird.rot = 0 }
            });
            document.addEventListener("touchmove", e => e.preventDefault(), { passive: false });

            // ‚ïê‚ïê‚ïê START ‚ïê‚ïê‚ïê
            (function lp() { update(); requestAnimationFrame(lp) })(); render();
        })();
    </script>
</body>

</html>
